{"version":3,"file":"DetectionPage-DoCjFBKY.js","sources":["../../src/pages/DetectionPage.tsx"],"sourcesContent":["import { Link } from 'react-router-dom';\nimport { useState, useEffect } from 'react';\nimport {\n  useAudioEngine,\n  useRoomClassifier,\n  useRooms,\n} from '../hooks';\nimport { ChirpMode } from '../audio';\nimport { PredictionResult } from '../ml';\n\ntype DetectionState = 'idle' | 'listening' | 'processing' | 'result' | 'error';\n\ninterface Alternative {\n  roomId: string;\n  probability: number;\n}\n\nexport default function DetectionPage() {\n  const { state: audioState, capture, requestPermission, reset: resetAudio } = useAudioEngine();\n  const { state: classifierState, predict } = useRoomClassifier();\n  const { state: roomsState, getRoomById } = useRooms();\n\n  const [detectionState, setDetectionState] = useState<DetectionState>('idle');\n  const [chirpMode, setChirpMode] = useState<ChirpMode>('audible');\n  const [prediction, setPrediction] = useState<PredictionResult | null>(null);\n  const [detectedRoomName, setDetectedRoomName] = useState<string | null>(null);\n  const [alternatives, setAlternatives] = useState<Alternative[]>([]);\n  const [error, setError] = useState<string | null>(null);\n\n  const hasModel = classifierState.modelState === 'ready';\n\n  // Update detection state based on audio state\n  useEffect(() => {\n    if (audioState.captureState === 'capturing') {\n      setDetectionState('listening');\n    } else if (audioState.captureState === 'processing') {\n      setDetectionState('processing');\n    }\n  }, [audioState.captureState]);\n\n  const handleDetect = async () => {\n    if (!hasModel) {\n      setError('No model trained. Please train a model first.');\n      setDetectionState('error');\n      return;\n    }\n\n    // Request permission if needed\n    if (!audioState.hasPermission) {\n      const granted = await requestPermission();\n      if (!granted) {\n        setError('Microphone permission denied');\n        setDetectionState('error');\n        return;\n      }\n    }\n\n    setError(null);\n    setPrediction(null);\n    setDetectedRoomName(null);\n    setAlternatives([]);\n    resetAudio();\n\n    // Capture audio\n    const features = await capture(chirpMode);\n\n    if (!features) {\n      setError(audioState.error || 'Failed to capture audio');\n      setDetectionState('error');\n      return;\n    }\n\n    // Run prediction\n    setDetectionState('processing');\n    const result = await predict(features.raw);\n\n    if (!result) {\n      setError(classifierState.error || 'Prediction failed');\n      setDetectionState('error');\n      return;\n    }\n\n    // Look up room name\n    const room = getRoomById(result.predictedRoomId);\n    setDetectedRoomName(room?.name || result.predictedRoomId);\n    setPrediction(result);\n\n    // Compute alternatives from allProbabilities\n    const alts: Alternative[] = [];\n    result.allProbabilities.forEach((prob, roomId) => {\n      if (roomId !== result.predictedRoomId) {\n        alts.push({ roomId, probability: prob });\n      }\n    });\n    alts.sort((a, b) => b.probability - a.probability);\n    setAlternatives(alts);\n\n    setDetectionState('result');\n  };\n\n  const getConfidenceColor = (confidence: number) => {\n    if (confidence >= 0.8) return 'text-green-400';\n    if (confidence >= 0.6) return 'text-yellow-400';\n    return 'text-red-400';\n  };\n\n  const getConfidenceLabel = (confidence: number) => {\n    if (confidence >= 0.8) return 'High confidence';\n    if (confidence >= 0.6) return 'Medium confidence';\n    return 'Low confidence';\n  };\n\n  return (\n    <div className=\"page safe-top\">\n      {/* Header */}\n      <header className=\"flex items-center gap-4 mb-6\">\n        <Link to=\"/\" className=\"btn-ghost p-2\">\n          <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 19l-7-7 7-7\" />\n          </svg>\n        </Link>\n        <h1 className=\"text-xl font-bold\">Detect Room</h1>\n      </header>\n\n      <div className=\"max-w-md mx-auto\">\n        {/* Detection Area */}\n        <div className=\"card text-center py-12\">\n          {detectionState === 'idle' && (\n            <>\n              <div className=\"w-32 h-32 mx-auto mb-6 rounded-full bg-dark-700 flex items-center justify-center\">\n                <svg className=\"w-16 h-16 text-gray-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.5} d=\"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z\" />\n                </svg>\n              </div>\n              <p className=\"text-gray-400 mb-6\">\n                {hasModel ? 'Tap to detect which room you\\'re in' : 'Train a model to start detecting'}\n              </p>\n            </>\n          )}\n\n          {detectionState === 'listening' && (\n            <>\n              <div className=\"w-32 h-32 mx-auto mb-6 rounded-full bg-primary-600/20 flex items-center justify-center animate-pulse-slow glow-primary\">\n                <div className=\"w-24 h-24 rounded-full bg-primary-600/40 flex items-center justify-center\">\n                  <svg className=\"w-12 h-12 text-primary-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z\" />\n                  </svg>\n                </div>\n              </div>\n              <p className=\"text-primary-400 mb-6\">Emitting chirp & listening...</p>\n            </>\n          )}\n\n          {detectionState === 'processing' && (\n            <>\n              <div className=\"w-32 h-32 mx-auto mb-6 rounded-full bg-accent-600/20 flex items-center justify-center\">\n                <div className=\"w-12 h-12 border-4 border-accent-500 border-t-transparent rounded-full animate-spin\" />\n              </div>\n              <p className=\"text-accent-400 mb-6\">Analyzing acoustic signature...</p>\n            </>\n          )}\n\n          {detectionState === 'result' && prediction && (\n            <>\n              <div className={`w-32 h-32 mx-auto mb-6 rounded-full flex items-center justify-center ${\n                prediction.confidence >= 0.6 ? 'bg-accent-600/20 glow-accent' : 'bg-yellow-600/20'\n              }`}>\n                <svg className={`w-16 h-16 ${prediction.confidence >= 0.6 ? 'text-accent-400' : 'text-yellow-400'}`} fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6\" />\n                </svg>\n              </div>\n              <h2 className={`text-2xl font-bold mb-2 ${prediction.confidence >= 0.6 ? 'text-accent-400' : 'text-yellow-400'}`}>\n                {detectedRoomName}\n              </h2>\n              <p className={`text-lg font-medium mb-1 ${getConfidenceColor(prediction.confidence)}`}>\n                {(prediction.confidence * 100).toFixed(0)}% confidence\n              </p>\n              <p className=\"text-sm text-gray-500 mb-4\">\n                {getConfidenceLabel(prediction.confidence)}\n              </p>\n\n              {/* Alternative predictions */}\n              {alternatives.length > 0 && (\n                <div className=\"mt-4 pt-4 border-t border-dark-600\">\n                  <p className=\"text-xs text-gray-500 mb-2\">Other possibilities:</p>\n                  <div className=\"flex flex-wrap justify-center gap-2\">\n                    {alternatives.slice(0, 3).map((alt, idx) => {\n                      const altRoom = getRoomById(alt.roomId);\n                      return (\n                        <span key={idx} className=\"text-xs bg-dark-700 px-2 py-1 rounded\">\n                          {altRoom?.name || alt.roomId}: {(alt.probability * 100).toFixed(0)}%\n                        </span>\n                      );\n                    })}\n                  </div>\n                </div>\n              )}\n            </>\n          )}\n\n          {detectionState === 'error' && (\n            <>\n              <div className=\"w-32 h-32 mx-auto mb-6 rounded-full bg-red-600/20 flex items-center justify-center\">\n                <svg className=\"w-16 h-16 text-red-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                </svg>\n              </div>\n              <h2 className=\"text-xl font-bold text-red-400 mb-2\">Detection Failed</h2>\n              <p className=\"text-gray-400 mb-6\">{error}</p>\n            </>\n          )}\n\n          <button\n            onClick={handleDetect}\n            disabled={detectionState === 'listening' || detectionState === 'processing'}\n            className={`btn-primary w-full text-lg py-4 ${\n              detectionState === 'idle' && hasModel ? 'glow-primary' : ''\n            } ${!hasModel ? 'opacity-50' : ''}`}\n          >\n            {detectionState === 'idle' && 'Detect Room'}\n            {detectionState === 'listening' && 'Listening...'}\n            {detectionState === 'processing' && 'Processing...'}\n            {detectionState === 'result' && 'Detect Again'}\n            {detectionState === 'error' && 'Try Again'}\n          </button>\n        </div>\n\n        {/* Mode Selector */}\n        <div className=\"card mt-6\">\n          <h2 className=\"section-title\">Detection Mode</h2>\n          <div className=\"grid grid-cols-2 gap-3\">\n            <button\n              onClick={() => setChirpMode('audible')}\n              className={`btn-secondary text-sm py-3 ${\n                chirpMode === 'audible' ? 'border-primary-500 bg-primary-600/10' : ''\n              }`}\n            >\n              <div className={`font-medium ${chirpMode === 'audible' ? 'text-primary-400' : ''}`}>\n                Audible\n              </div>\n              <div className=\"text-xs text-gray-500\">High accuracy</div>\n            </button>\n            <button\n              onClick={() => setChirpMode('ultrasonic')}\n              className={`btn-secondary text-sm py-3 ${\n                chirpMode === 'ultrasonic' ? 'border-primary-500 bg-primary-600/10' : ''\n              }`}\n            >\n              <div className={`font-medium ${chirpMode === 'ultrasonic' ? 'text-primary-400' : ''}`}>\n                Ultrasonic\n              </div>\n              <div className=\"text-xs text-gray-500\">Less audible</div>\n            </button>\n          </div>\n        </div>\n\n        {/* Model Info / No Model Warning */}\n        {hasModel ? (\n          <div className=\"card mt-6 border-green-600/50 bg-green-600/10\">\n            <div className=\"flex gap-3\">\n              <svg className=\"w-6 h-6 text-green-500 flex-shrink-0\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\" />\n              </svg>\n              <div>\n                <h3 className=\"font-medium text-green-500\">Model Ready</h3>\n                <p className=\"text-sm text-gray-400 mt-1\">\n                  {classifierState.modelInfo?.roomCount} rooms trained, {((classifierState.modelInfo?.accuracy || 0) * 100).toFixed(0)}% accuracy\n                </p>\n              </div>\n            </div>\n          </div>\n        ) : (\n          <div className=\"card mt-6 border-yellow-600/50 bg-yellow-600/10\">\n            <div className=\"flex gap-3\">\n              <svg className=\"w-6 h-6 text-yellow-500 flex-shrink-0\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z\" />\n              </svg>\n              <div>\n                <h3 className=\"font-medium text-yellow-500\">No Model Trained</h3>\n                <p className=\"text-sm text-gray-400 mt-1\">\n                  Go to Training to add rooms and train the classifier.\n                </p>\n                <Link to=\"/training\" className=\"text-sm text-primary-400 hover:text-primary-300 mt-2 inline-block\">\n                  Go to Training â†’\n                </Link>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Recent Rooms */}\n        {roomsState.rooms.length > 0 && (\n          <div className=\"card mt-6\">\n            <h2 className=\"section-title\">Trained Rooms</h2>\n            <div className=\"flex flex-wrap gap-2\">\n              {roomsState.rooms.map((room) => (\n                <span\n                  key={room.id}\n                  className=\"text-sm bg-dark-700 px-3 py-1 rounded-full text-gray-300\"\n                >\n                  {room.name}\n                </span>\n              ))}\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"names":["DetectionPage","audioState","capture","requestPermission","resetAudio","useAudioEngine","classifierState","predict","useRoomClassifier","roomsState","getRoomById","useRooms","detectionState","setDetectionState","useState","chirpMode","setChirpMode","prediction","setPrediction","detectedRoomName","setDetectedRoomName","alternatives","setAlternatives","error","setError","hasModel","useEffect","handleDetect","features","result","room","alts","prob","roomId","a","b","getConfidenceColor","confidence","getConfidenceLabel","jsxs","jsx","Link","Fragment","alt","idx","altRoom","_a","_b"],"mappings":"sOAiBA,SAAwBA,GAAgB,SACtC,KAAM,CAAE,MAAOC,EAAY,QAAAC,EAAS,kBAAAC,EAAmB,MAAOC,CAAA,EAAeC,EAAA,EACvE,CAAE,MAAOC,EAAiB,QAAAC,CAAA,EAAYC,EAAA,EACtC,CAAE,MAAOC,EAAY,YAAAC,CAAA,EAAgBC,EAAA,EAErC,CAACC,EAAgBC,CAAiB,EAAIC,EAAAA,SAAyB,MAAM,EACrE,CAACC,EAAWC,CAAY,EAAIF,EAAAA,SAAoB,SAAS,EACzD,CAACG,EAAYC,CAAa,EAAIJ,EAAAA,SAAkC,IAAI,EACpE,CAACK,EAAkBC,CAAmB,EAAIN,EAAAA,SAAwB,IAAI,EACtE,CAACO,EAAcC,CAAe,EAAIR,EAAAA,SAAwB,CAAA,CAAE,EAC5D,CAACS,EAAOC,CAAQ,EAAIV,EAAAA,SAAwB,IAAI,EAEhDW,EAAWnB,EAAgB,aAAe,QAGhDoB,EAAAA,UAAU,IAAM,CACVzB,EAAW,eAAiB,YAC9BY,EAAkB,WAAW,EACpBZ,EAAW,eAAiB,cACrCY,EAAkB,YAAY,CAElC,EAAG,CAACZ,EAAW,YAAY,CAAC,EAE5B,MAAM0B,EAAe,SAAY,CAC/B,GAAI,CAACF,EAAU,CACbD,EAAS,+CAA+C,EACxDX,EAAkB,OAAO,EACzB,MACF,CAGA,GAAI,CAACZ,EAAW,eAEV,CADY,MAAME,EAAA,EACR,CACZqB,EAAS,8BAA8B,EACvCX,EAAkB,OAAO,EACzB,MACF,CAGFW,EAAS,IAAI,EACbN,EAAc,IAAI,EAClBE,EAAoB,IAAI,EACxBE,EAAgB,CAAA,CAAE,EAClBlB,EAAA,EAGA,MAAMwB,EAAW,MAAM1B,EAAQa,CAAS,EAExC,GAAI,CAACa,EAAU,CACbJ,EAASvB,EAAW,OAAS,yBAAyB,EACtDY,EAAkB,OAAO,EACzB,MACF,CAGAA,EAAkB,YAAY,EAC9B,MAAMgB,EAAS,MAAMtB,EAAQqB,EAAS,GAAG,EAEzC,GAAI,CAACC,EAAQ,CACXL,EAASlB,EAAgB,OAAS,mBAAmB,EACrDO,EAAkB,OAAO,EACzB,MACF,CAGA,MAAMiB,EAAOpB,EAAYmB,EAAO,eAAe,EAC/CT,GAAoBU,GAAA,YAAAA,EAAM,OAAQD,EAAO,eAAe,EACxDX,EAAcW,CAAM,EAGpB,MAAME,EAAsB,CAAA,EAC5BF,EAAO,iBAAiB,QAAQ,CAACG,EAAMC,IAAW,CAC5CA,IAAWJ,EAAO,iBACpBE,EAAK,KAAK,CAAE,OAAAE,EAAQ,YAAaD,EAAM,CAE3C,CAAC,EACDD,EAAK,KAAK,CAACG,EAAGC,IAAMA,EAAE,YAAcD,EAAE,WAAW,EACjDZ,EAAgBS,CAAI,EAEpBlB,EAAkB,QAAQ,CAC5B,EAEMuB,EAAsBC,GACtBA,GAAc,GAAY,iBAC1BA,GAAc,GAAY,kBACvB,eAGHC,EAAsBD,GACtBA,GAAc,GAAY,kBAC1BA,GAAc,GAAY,oBACvB,iBAGT,OACEE,EAAAA,KAAC,MAAA,CAAI,UAAU,gBAEb,SAAA,CAAAA,EAAAA,KAAC,SAAA,CAAO,UAAU,+BAChB,SAAA,CAAAC,EAAAA,IAACC,EAAA,CAAK,GAAG,IAAI,UAAU,gBACrB,SAAAD,EAAAA,IAAC,MAAA,CAAI,UAAU,UAAU,KAAK,OAAO,OAAO,eAAe,QAAQ,YACjE,SAAAA,EAAAA,IAAC,OAAA,CAAK,cAAc,QAAQ,eAAe,QAAQ,YAAa,EAAG,EAAE,iBAAA,CAAkB,CAAA,CACzF,EACF,EACAA,EAAAA,IAAC,KAAA,CAAG,UAAU,oBAAoB,SAAA,aAAA,CAAW,CAAA,EAC/C,EAEAD,EAAAA,KAAC,MAAA,CAAI,UAAU,mBAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,yBACZ,SAAA,CAAA3B,IAAmB,QAClB2B,EAAAA,KAAAG,EAAAA,SAAA,CACE,SAAA,CAAAF,EAAAA,IAAC,MAAA,CAAI,UAAU,mFACb,SAAAA,EAAAA,IAAC,MAAA,CAAI,UAAU,0BAA0B,KAAK,OAAO,OAAO,eAAe,QAAQ,YACjF,SAAAA,EAAAA,IAAC,OAAA,CAAK,cAAc,QAAQ,eAAe,QAAQ,YAAa,IAAK,EAAE,wGAAA,CAAyG,CAAA,CAClL,CAAA,CACF,QACC,IAAA,CAAE,UAAU,qBACV,SAAAf,EAAW,qCAAwC,kCAAA,CACtD,CAAA,EACF,EAGDb,IAAmB,aAClB2B,EAAAA,KAAAG,EAAAA,SAAA,CACE,SAAA,CAAAF,EAAAA,IAAC,MAAA,CAAI,UAAU,yHACb,SAAAA,EAAAA,IAAC,MAAA,CAAI,UAAU,4EACb,SAAAA,EAAAA,IAAC,MAAA,CAAI,UAAU,6BAA6B,KAAK,OAAO,OAAO,eAAe,QAAQ,YACpF,SAAAA,EAAAA,IAAC,OAAA,CAAK,cAAc,QAAQ,eAAe,QAAQ,YAAa,EAAG,EAAE,wGAAA,CAAyG,CAAA,CAChL,EACF,EACF,EACAA,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,+BAAA,CAA6B,CAAA,EACpE,EAGD5B,IAAmB,cAClB2B,EAAAA,KAAAG,EAAAA,SAAA,CACE,SAAA,CAAAF,EAAAA,IAAC,OAAI,UAAU,wFACb,eAAC,MAAA,CAAI,UAAU,sFAAsF,CAAA,CACvG,EACAA,EAAAA,IAAC,IAAA,CAAE,UAAU,uBAAuB,SAAA,iCAAA,CAA+B,CAAA,EACrE,EAGD5B,IAAmB,UAAYK,GAC9BsB,EAAAA,KAAAG,EAAAA,SAAA,CACE,SAAA,CAAAF,MAAC,OAAI,UAAW,wEACdvB,EAAW,YAAc,GAAM,+BAAiC,kBAClE,GACE,SAAAuB,EAAAA,IAAC,OAAI,UAAW,aAAavB,EAAW,YAAc,GAAM,kBAAoB,iBAAiB,GAAI,KAAK,OAAO,OAAO,eAAe,QAAQ,YAC7I,eAAC,OAAA,CAAK,cAAc,QAAQ,eAAe,QAAQ,YAAa,EAAG,EAAE,kJAAA,CAAmJ,EAC1N,EACF,EACAuB,EAAAA,IAAC,KAAA,CAAG,UAAW,2BAA2BvB,EAAW,YAAc,GAAM,kBAAoB,iBAAiB,GAC3G,SAAAE,CAAA,CACH,EACAoB,EAAAA,KAAC,KAAE,UAAW,4BAA4BH,EAAmBnB,EAAW,UAAU,CAAC,GAC/E,SAAA,EAAAA,EAAW,WAAa,KAAK,QAAQ,CAAC,EAAE,cAAA,EAC5C,QACC,IAAA,CAAE,UAAU,6BACV,SAAAqB,EAAmBrB,EAAW,UAAU,EAC3C,EAGCI,EAAa,OAAS,GACrBkB,EAAAA,KAAC,MAAA,CAAI,UAAU,qCACb,SAAA,CAAAC,EAAAA,IAAC,IAAA,CAAE,UAAU,6BAA6B,SAAA,uBAAoB,EAC9DA,EAAAA,IAAC,MAAA,CAAI,UAAU,sCACZ,SAAAnB,EAAa,MAAM,EAAG,CAAC,EAAE,IAAI,CAACsB,EAAKC,IAAQ,CAC1C,MAAMC,EAAUnC,EAAYiC,EAAI,MAAM,EACtC,OACEJ,EAAAA,KAAC,OAAA,CAAe,UAAU,wCACvB,SAAA,EAAAM,GAAA,YAAAA,EAAS,OAAQF,EAAI,OAAO,MAAIA,EAAI,YAAc,KAAK,QAAQ,CAAC,EAAE,GAAA,CAAA,EAD1DC,CAEX,CAEJ,CAAC,CAAA,CACH,CAAA,CAAA,CACF,CAAA,EAEJ,EAGDhC,IAAmB,SAClB2B,EAAAA,KAAAG,EAAAA,SAAA,CACE,SAAA,CAAAF,EAAAA,IAAC,MAAA,CAAI,UAAU,qFACb,SAAAA,EAAAA,IAAC,MAAA,CAAI,UAAU,yBAAyB,KAAK,OAAO,OAAO,eAAe,QAAQ,YAChF,SAAAA,EAAAA,IAAC,OAAA,CAAK,cAAc,QAAQ,eAAe,QAAQ,YAAa,EAAG,EAAE,mDAAA,CAAoD,CAAA,CAC3H,CAAA,CACF,EACAA,EAAAA,IAAC,KAAA,CAAG,UAAU,sCAAsC,SAAA,mBAAgB,EACpEA,EAAAA,IAAC,IAAA,CAAE,UAAU,qBAAsB,SAAAjB,CAAA,CAAM,CAAA,EAC3C,EAGFgB,EAAAA,KAAC,SAAA,CACC,QAASZ,EACT,SAAUf,IAAmB,aAAeA,IAAmB,aAC/D,UAAW,mCACTA,IAAmB,QAAUa,EAAW,eAAiB,EAC3D,IAAKA,EAA0B,GAAf,YAAiB,GAEhC,SAAA,CAAAb,IAAmB,QAAU,cAC7BA,IAAmB,aAAe,eAClCA,IAAmB,cAAgB,gBACnCA,IAAmB,UAAY,eAC/BA,IAAmB,SAAW,WAAA,CAAA,CAAA,CACjC,EACF,EAGA2B,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,gBAAgB,SAAA,iBAAc,EAC5CD,EAAAA,KAAC,MAAA,CAAI,UAAU,yBACb,SAAA,CAAAA,EAAAA,KAAC,SAAA,CACC,QAAS,IAAMvB,EAAa,SAAS,EACrC,UAAW,8BACTD,IAAc,UAAY,uCAAyC,EACrE,GAEA,SAAA,CAAAyB,EAAAA,IAAC,MAAA,CAAI,UAAW,eAAezB,IAAc,UAAY,mBAAqB,EAAE,GAAI,SAAA,SAAA,CAEpF,EACAyB,EAAAA,IAAC,MAAA,CAAI,UAAU,wBAAwB,SAAA,eAAA,CAAa,CAAA,CAAA,CAAA,EAEtDD,EAAAA,KAAC,SAAA,CACC,QAAS,IAAMvB,EAAa,YAAY,EACxC,UAAW,8BACTD,IAAc,aAAe,uCAAyC,EACxE,GAEA,SAAA,CAAAyB,EAAAA,IAAC,MAAA,CAAI,UAAW,eAAezB,IAAc,aAAe,mBAAqB,EAAE,GAAI,SAAA,YAAA,CAEvF,EACAyB,EAAAA,IAAC,MAAA,CAAI,UAAU,wBAAwB,SAAA,cAAA,CAAY,CAAA,CAAA,CAAA,CACrD,CAAA,CACF,CAAA,EACF,EAGCf,QACE,MAAA,CAAI,UAAU,gDACb,SAAAc,EAAAA,KAAC,MAAA,CAAI,UAAU,aACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,uCAAuC,KAAK,OAAO,OAAO,eAAe,QAAQ,YAC9F,eAAC,OAAA,CAAK,cAAc,QAAQ,eAAe,QAAQ,YAAa,EAAG,EAAE,gDAAgD,CAAA,CACvH,SACC,MAAA,CACC,SAAA,CAAAA,EAAAA,IAAC,KAAA,CAAG,UAAU,6BAA6B,SAAA,cAAW,EACtDD,EAAAA,KAAC,IAAA,CAAE,UAAU,6BACV,SAAA,EAAAO,EAAAxC,EAAgB,YAAhB,YAAAwC,EAA2B,UAAU,uBAAmBC,EAAAzC,EAAgB,YAAhB,YAAAyC,EAA2B,WAAY,GAAK,KAAK,QAAQ,CAAC,EAAE,YAAA,CAAA,CACvH,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,EAEAP,EAAAA,IAAC,MAAA,CAAI,UAAU,kDACb,SAAAD,EAAAA,KAAC,MAAA,CAAI,UAAU,aACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,wCAAwC,KAAK,OAAO,OAAO,eAAe,QAAQ,YAC/F,eAAC,OAAA,CAAK,cAAc,QAAQ,eAAe,QAAQ,YAAa,EAAG,EAAE,uIAAuI,CAAA,CAC9M,SACC,MAAA,CACC,SAAA,CAAAA,EAAAA,IAAC,KAAA,CAAG,UAAU,8BAA8B,SAAA,mBAAgB,EAC5DA,EAAAA,IAAC,IAAA,CAAE,UAAU,6BAA6B,SAAA,wDAE1C,QACCC,EAAA,CAAK,GAAG,YAAY,UAAU,oEAAoE,SAAA,kBAAA,CAEnG,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,EAIDhC,EAAW,MAAM,OAAS,GACzB8B,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,gBAAgB,SAAA,gBAAa,EAC3CA,EAAAA,IAAC,OAAI,UAAU,uBACZ,WAAW,MAAM,IAAKV,GACrBU,EAAAA,IAAC,OAAA,CAEC,UAAU,2DAET,SAAAV,EAAK,IAAA,EAHDA,EAAK,EAAA,CAKb,CAAA,CACH,CAAA,CAAA,CACF,CAAA,CAAA,CAEJ,CAAA,EACF,CAEJ"}